#!/usr/bin/env node

/**
 * Script to sync flowchart_requirements.md content to requirements.js
 * This allows the React Native app to import the requirements dynamically
 */

const fs = require('fs');
const path = require('path');

const assetsDir = path.join(__dirname, '..', 'assets', 'flowchart');
const mdFile = path.join(assetsDir, 'flowchart_requirements.md');
const jsFile = path.join(assetsDir, 'requirements.js');

function syncRequirements() {
  try {
    // Read the markdown file
    const markdownContent = fs.readFileSync(mdFile, 'utf8');
    
    // Create the JavaScript file content
    const jsContent = `// This file exports the flowchart requirements content
// It's automatically generated from flowchart_requirements.md
// DO NOT EDIT THIS FILE DIRECTLY - edit flowchart_requirements.md instead

export const requirementsContent = \`${markdownContent}\`;

export default requirementsContent;`;

    // Write the JavaScript file
    fs.writeFileSync(jsFile, jsContent, 'utf8');
    
    console.log('‚úÖ Successfully synced flowchart_requirements.md to requirements.js');
    console.log(`üìÑ Markdown file: ${mdFile}`);
    console.log(`üìÑ JavaScript file: ${jsFile}`);
    
  } catch (error) {
    console.error('‚ùå Error syncing requirements:', error.message);
    process.exit(1);
  }
}

// Run the sync
syncRequirements();